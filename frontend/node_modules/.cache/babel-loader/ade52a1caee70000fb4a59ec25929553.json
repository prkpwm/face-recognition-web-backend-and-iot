{"ast":null,"code":"var _jsxFileName = \"/home/recognition/Desktop/face-recognition-web-backend-and-iot/frontend/src/components/SettingPassword/SettingPassword.jsx\";\nimport React from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { message } from 'antd';\nimport { CehckOldPassword, UpdatePassword } from \"../../services/APIs/Setting\";\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\nimport { far } from \"@fortawesome/free-regular-svg-icons\";\nimport './settingpassword.scss';\nlet word = {\n  'Password Setting': {\n    'EN': 'Password Setting',\n    'TH': 'การตั้งค่ารหัสผ่าน'\n  },\n  'Old Password': {\n    'EN': 'Old Password',\n    'TH': 'รหัสผ่านเก่า'\n  },\n  'New Password': {\n    'EN': 'New Password',\n    'TH': 'รหัสผ่านใหม่'\n  },\n  'Confirm Password': {\n    'EN': 'Confirm Password',\n    'TH': 'ยืนยันรหัสผ่าน'\n  },\n  'Save': {\n    'EN': 'Save',\n    'TH': 'บันทึก'\n  },\n  'The password is less than 8 characters.': {\n    'EN': 'Save',\n    'TH': 'รหัสผ่านมีความยาวน้อยกว่า 8 ตัวอักษร'\n  },\n  'Done': {\n    'EN': 'Save',\n    'TH': 'เสร็จแล้ว'\n  },\n  'Not Change Password': {\n    'EN': 'Save',\n    'TH': 'ไม่เปลี่ยนรหัสผ่าน'\n  }\n};\nlibrary.add(fas);\n\nclass SettingPassword extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      language: \"TH\",\n      old_password: \"\",\n      new_password: \"\",\n      confirm_password: \"\",\n      status_checkold_password: null,\n      visible_newpass: true,\n      valid_confirmpassword: null,\n      disabled_btn_save: true\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    GetLanguage() // Get language for display\n    .then(_Edit => {\n      if (_Edit.data.status) {\n        setTimeout(() => {\n          this.setState({\n            loading: false\n          });\n        }, 800);\n        this.setState({\n          language: _Edit.data.msg[0].lang\n        });\n      }\n    }).catch(_EditError => {\n      window.location.href = \"/password\";\n    });\n  }\n\n  OnChangeOldPassword(e) {\n    // check old password\n    console.log(e.target.value);\n    var value = e.target.value;\n    this.setState({\n      old_password: e.target.value\n    });\n    this.CheckOldPass(value);\n  }\n\n  OnChangeNewPassword(e) {\n    // new password\n    this.setState({\n      new_password: e.target.value\n    });\n  }\n\n  OnChangeConfirmPassword(e) {\n    // confirm password\n    var confirm = e.target.value;\n    this.setState({\n      confirm_password: e.target.value\n    });\n\n    if (confirm != this.state.new_password) {\n      this.setState({\n        valid_confirmpassword: true\n      });\n    } else {\n      this.setState({\n        valid_confirmpassword: false,\n        disabled_btn_save: false\n      });\n    }\n  }\n\n  CheckOldPass(value) {\n    if (value.length >= 8) {\n      CehckOldPassword(value).then(_Oldpass => {\n        if (_Oldpass.data.status) {\n          this.setState({\n            status_checkold_password: _Oldpass.data.status,\n            visible_newpass: false\n          });\n        } else {\n          this.setState({\n            status_checkold_password: _Oldpass.data.status,\n            visible_newpass: true\n          });\n        }\n      }).catch(_OldpassError => console.error(_OldpassError));\n    }\n  }\n\n  SaveNewPassword() {\n    // Update Password\n    // console.log(this.state.new_password.length) \n    if (this.state.new_password.length < 8) {\n      this.setState({\n        new_password: \"\",\n        confirm_password: \"\",\n        valid_confirmpassword: null\n      });\n      message.error({\n        content: word['The password is less than 8 characters.'][this.state.language],\n        className: 'message-alert',\n        // duration: 200,\n        style: {\n          marginTop: '8vh'\n        }\n      });\n    } else {\n      UpdatePassword(this.state.new_password).then(_StatusUpdate => {\n        console.log(\"GFOL\", _StatusUpdate);\n\n        if (_StatusUpdate.data.status) {\n          message.success({\n            content: word['Done'][this.state.language],\n            className: 'message-done',\n            // duration: 500,\n            style: {\n              marginTop: '2vh'\n            }\n          });\n          localStorage.removeItem(\"_Token\");\n          setTimeout(function () {\n            window.location.href = \"/password\";\n          }, 200);\n        } else {\n          message.error({\n            content: word['Not Change Password'][this.state.language],\n            className: 'message-alert',\n            // duration: 200,\n            style: {\n              marginTop: '5vh'\n            }\n          });\n        }\n      }).catch(_StatusUpdateError => console.error(_StatusUpdateError));\n    }\n  }\n\n  render() {\n    // console.log(this.state.status_checkold_password)\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"size-web\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cov-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"hmenu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icon-back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/menu\",\n      className: \"link-back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: ['fas', 'less-than'],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 71\n      }\n    }))), /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"hd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }, word['Password Setting'][this.state.language])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-inputset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-old\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"la-pass\",\n      htmlFor: \"Oldpass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 37\n      }\n    }, word['Old Password'][this.state.language]), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      maxLength: \"8\",\n      onChange: e => {\n        this.OnChangeOldPassword(e);\n      },\n      value: this.state.old_password,\n      className: \"form-control input-data\",\n      id: \"Oldpass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-status \" + (this.state.status_checkold_password == true ? \"green\" : this.state.status_checkold_password == false ? \"red\" : null),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"la-pass\",\n      htmlFor: \"Newpass\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, word['New Password'][this.state.language]), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control input-data\",\n      maxLength: \"8\",\n      value: this.state.new_password,\n      onChange: e => {\n        this.OnChangeNewPassword(e);\n      },\n      id: \"Newpass\",\n      disabled: this.state.visible_newpass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box-confirm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"la-pass old\",\n      htmlFor: \"Confirm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 37\n      }\n    }, word['Confirm Password'][this.state.language]), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      maxLength: \"8\",\n      value: this.state.confirm_password,\n      onChange: e => {\n        this.OnChangeConfirmPassword(e);\n      },\n      className: \"form-control input-data\",\n      id: \"Confirm\",\n      disabled: this.state.visible_newpass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"color-status \" + (this.state.valid_confirmpassword == true ? \"red\" : this.state.valid_confirmpassword == false ? \"green\" : null),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cov-save\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-save\",\n      onClick: () => {\n        this.SaveNewPassword();\n      },\n      disabled: this.state.disabled_btn_save,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 33\n      }\n    }, word['Save'][this.state.language]))))));\n  }\n\n}\n\nexport default SettingPassword;","map":{"version":3,"sources":["/home/recognition/Desktop/face-recognition-web-backend-and-iot/frontend/src/components/SettingPassword/SettingPassword.jsx"],"names":["React","FontAwesomeIcon","library","message","CehckOldPassword","UpdatePassword","fas","far","word","add","SettingPassword","Component","constructor","props","state","language","old_password","new_password","confirm_password","status_checkold_password","visible_newpass","valid_confirmpassword","disabled_btn_save","componentDidMount","setState","loading","GetLanguage","then","_Edit","data","status","setTimeout","msg","lang","catch","_EditError","window","location","href","OnChangeOldPassword","e","console","log","target","value","CheckOldPass","OnChangeNewPassword","OnChangeConfirmPassword","confirm","length","_Oldpass","_OldpassError","error","SaveNewPassword","content","className","style","marginTop","_StatusUpdate","success","localStorage","removeItem","_StatusUpdateError","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { message } from 'antd';\nimport { CehckOldPassword, UpdatePassword } from \"../../services/APIs/Setting\";\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\nimport { far } from \"@fortawesome/free-regular-svg-icons\";\nimport './settingpassword.scss'\n\nlet word = {'Password Setting':{'EN':'Password Setting','TH':'การตั้งค่ารหัสผ่าน'},\n            'Old Password':{'EN':'Old Password','TH':'รหัสผ่านเก่า'},\n            'New Password':{'EN':'New Password','TH':'รหัสผ่านใหม่'},\n            'Confirm Password':{'EN':'Confirm Password','TH':'ยืนยันรหัสผ่าน'},\n            'Save':{'EN':'Save','TH':'บันทึก'},\n            'The password is less than 8 characters.':{'EN':'Save','TH':'รหัสผ่านมีความยาวน้อยกว่า 8 ตัวอักษร'},\n            'Done':{'EN':'Save','TH':'เสร็จแล้ว'},\n            'Not Change Password':{'EN':'Save','TH':'ไม่เปลี่ยนรหัสผ่าน'},\n        }\n\nlibrary.add(fas)\n\nclass SettingPassword extends React.Component {\n\n    constructor(props) {\n\n        super(props)\n        this.state = {\n            language:\"TH\",\n            old_password: \"\",\n            new_password: \"\",\n            confirm_password: \"\",\n            status_checkold_password: null,\n            visible_newpass: true,\n            valid_confirmpassword: null,\n            disabled_btn_save: true\n        }\n\n    }\n    componentDidMount() {\n        this.setState({\n            loading: true\n        })\n        GetLanguage() // Get language for display\n            .then(_Edit => {\n                \n\n                if (_Edit.data.status) {\n\n                    setTimeout(() => {\n                        this.setState({\n                            loading: false\n                        })\n                      }, 800);\n                    this.setState({\n                        language: _Edit.data.msg[0].lang,\n                        \n                    })\n\n\n                }\n            })\n\n            .catch(_EditError => {\n                window.location.href = \"/password\";\n            })\n    }\n    OnChangeOldPassword(e) { // check old password\n        console.log(e.target.value)\n        var value = e.target.value\n        this.setState({\n            old_password: e.target.value\n        })\n\n        this.CheckOldPass(value)\n    }\n\n\n    OnChangeNewPassword(e) { // new password\n        this.setState({\n            new_password: e.target.value\n        })\n\n    }\n\n    OnChangeConfirmPassword(e) { // confirm password\n        var confirm = e.target.value\n        this.setState({\n            confirm_password: e.target.value\n        })\n\n        if (confirm != this.state.new_password) {\n            this.setState({\n                valid_confirmpassword: true\n            })\n        } else {\n            this.setState({\n                valid_confirmpassword: false,\n                disabled_btn_save: false\n            })\n        }\n\n    }\n\n\n    CheckOldPass(value) {\n        if (value.length >= 8) {\n            CehckOldPassword(value)\n                .then(_Oldpass => {\n                    if (_Oldpass.data.status) {\n                        this.setState({\n                            status_checkold_password: _Oldpass.data.status,\n                            visible_newpass: false\n                        })\n                    } else {\n                        this.setState({\n                            status_checkold_password: _Oldpass.data.status,\n                            visible_newpass: true\n                        })\n                    }\n\n                })\n                .catch(_OldpassError => console.error(_OldpassError))\n        }\n    }\n\n\n    SaveNewPassword(){ // Update Password\n        // console.log(this.state.new_password.length) \n        if(this.state.new_password.length < 8){\n            this.setState({\n                new_password: \"\",\n                confirm_password: \"\",\n                valid_confirmpassword: null\n            })\n\n            message.error({\n                content: word['The password is less than 8 characters.'][this.state.language],\n                className: 'message-alert',\n                // duration: 200,\n                style: {\n                    marginTop: '8vh',\n                },\n            });\n        }else{\n            UpdatePassword(this.state.new_password)\n            .then(_StatusUpdate => {\n                console.log(\"GFOL\",_StatusUpdate)\n                if(_StatusUpdate.data.status){\n\n                    message.success({\n                        content: word['Done'][this.state.language],\n                        className: 'message-done',\n                        // duration: 500,\n                        style: {\n                            marginTop: '2vh',\n                        },\n                    });\n\n                    localStorage.removeItem(\"_Token\")\n                    setTimeout(function () {\n                        window.location.href = \"/password\";\n                      }, 200);\n\n                }else{\n                    message.error({\n                        content: word['Not Change Password'][this.state.language],\n                        className: 'message-alert',\n                        // duration: 200,\n                        style: {\n                            marginTop: '5vh',\n                        },\n                    });\n                }\n                    \n\n            })\n            .catch(_StatusUpdateError => console.error(_StatusUpdateError))\n        }\n    }\n\n\n    render() {\n\n\n\n        // console.log(this.state.status_checkold_password)\n\n        return (\n            <div>\n                <div className=\"size-web\">\n                    <div className=\"cov-menu\">\n                        <div className=\"hmenu\">\n                            <div className=\"icon-back\">\n                                <a href=\"/menu\" className=\"link-back\"><FontAwesomeIcon icon={['fas', 'less-than']} /></a>\n                            </div>\n                            <h1 className=\"hd\">{word['Password Setting'][this.state.language]}</h1>\n                        </div>\n                        <div className=\"box-inputset\">\n                            <div className=\"box-old\">\n                                <div className=\"form-group\">\n                                    <label className=\"la-pass\" htmlFor=\"Oldpass\">{word['Old Password'][this.state.language]}</label>\n                                    <input type=\"text\" maxLength=\"8\" onChange={(e) => { this.OnChangeOldPassword(e) }} value={this.state.old_password} className=\"form-control input-data\" id=\"Oldpass\" />\n                                    <div className={\"color-status \" + (this.state.status_checkold_password == true ? \"green\" : this.state.status_checkold_password == false ? \"red\" : null)}></div>\n                                </div>\n                            </div>\n                            <div className=\"box-new\">\n                                <div className=\"form-group\">\n                                    <label className=\"la-pass\" htmlFor=\"Newpass\">{word['New Password'][this.state.language]}</label>\n                                    <input type=\"text\"\n                                        className=\"form-control input-data\" maxLength=\"8\"\n                                        value={this.state.new_password}\n                                        onChange={(e) => { this.OnChangeNewPassword(e) }} id=\"Newpass\"\n                                     disabled={this.state.visible_newpass}\n                                    />\n\n                                </div>\n                            </div>\n                            <div className=\"box-confirm\">\n                                <div className=\"form-group\">\n                                    <label className=\"la-pass old\" htmlFor=\"Confirm\">{word['Confirm Password'][this.state.language]}</label>\n                                    <input type=\"text\" maxLength=\"8\"\n                                        value={this.state.confirm_password}\n                                        onChange={(e) => { this.OnChangeConfirmPassword(e) }}\n                                        className=\"form-control input-data\" id=\"Confirm\"\n                                    disabled={this.state.visible_newpass} \n                                    />\n                                    <div className={\"color-status \" + (this.state.valid_confirmpassword == true ? \"red\" : this.state.valid_confirmpassword == false ? \"green\" : null)}></div>\n                                </div>\n\n                            </div>\n                            <div className=\"cov-save\">\n                                <button className=\"btn btn-primary btn-save\" onClick={()=>{this.SaveNewPassword()}} disabled={this.state.disabled_btn_save}>{word['Save'][this.state.language]}</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n\n    }\n\n\n\n}\n\nexport default SettingPassword"]},"metadata":{},"sourceType":"module"}